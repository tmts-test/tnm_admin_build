"use strict";(self.webpackChunktnm_front_admin=self.webpackChunktnm_front_admin||[]).push([[3043],{3043:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var r=n(1027),l=n(2132),a=n(5619),s=n(5788),o=n(8920),m=n(2030),u=n(9492),i=n(3269),c=n(9264),d=n(8509);var p=n(531),f=Object.defineProperty,b=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,y=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||(t={}))g.call(t,n)&&y(e,n,t[n]);if(b)for(var n of b(t))h.call(t,n)&&y(e,n,t[n]);return e},v=(e,t,n)=>new Promise(((r,l)=>{var a=e=>{try{o(n.next(e))}catch(e){l(e)}},s=e=>{try{o(n.throw(e))}catch(e){l(e)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,s);o((n=n.apply(e,t)).next())}));const E=function(){var e,t;const{login:n}=(0,o.A)(),f=(0,l.Zp)(),{auth:b,setInfo:g,setMenu:h,setMenuRoot:y}=(0,p.A)(),[E,w]=(0,r.useState)(!1),[I,A]=(0,r.useState)(!1),{register:S,formState:{errors:V},handleSubmit:N}=(0,s.mN)({mode:"onSubmit",defaultValues:{username:"",password:""}}),{data:U,refetch:j}=(0,d.I)({queryKey:["/adm/auth/member/info"],enabled:!1}),{data:O,refetch:P}=(0,d.I)({queryKey:["/adm/auth/menu/list"],enabled:!1});(0,r.useEffect)((()=>{if(localStorage.removeItem("menu"),localStorage.removeItem("info"),"200100"===(null==U?void 0:U.code)&&b.isAuthenticated){g(U.result.signInInfo),localStorage.setItem("info",JSON.stringify(U.result.signInInfo));const e=null==O?void 0:O.result.authMenuList;e&&h(e),k(U.result.signInInfo.lstPwdModDtm)?e&&("/notification"===e[0].menuUrlVal&&(f(e[0].menuUrlVal),y(e[0].menuUrlVal)),f(e[1].menuUrlVal),y(e[1].menuUrlVal)):A(!0)}}),[E]);const k=e=>{if(null===e){const e=null==O?void 0:O.result.authMenuList;return e&&("/notification"===e[0].menuUrlVal&&y(e[0].menuUrlVal),y(e[1].menuUrlVal)),f("/password"),!1}const t=new Date,n=new Date(e);return!((t.getTime()-n.getTime())/864e5>=90)},L=()=>v(this,null,(function*(){try{a.A.put("/adm/auth/member/change-password-after").then((e=>{if(200===e.status){const e=null==O?void 0:O.result.authMenuList;e&&("/notification"===e[0].menuUrlVal&&f(e[0].menuUrlVal),f(e[1].menuUrlVal))}}))}catch(e){console.log(e)}}));return r.createElement(r.Fragment,null,r.createElement("div",{className:"flex justify-center items-center w-full h-screen"},r.createElement("form",{onSubmit:N((e=>v(this,null,(function*(){yield n(e),yield j(),yield P(),w(!E)}))))},r.createElement("div",{className:"border-4 rounded-[30px] border-tp-100 mb-4 px-[40px] pt-[46px] pb-[36px]"},r.createElement("div",{className:"w-[514px] border-b-2 border-tg-140 pb-[20px]"},r.createElement(m.A,{icon:"logo"})),r.createElement("div",{className:"flex flex-col gap-2.5 px-[24px] pt-[30px] pb-[40px]"},r.createElement(u.A,x({type:"text",size:"md",isError:V.username,placeholder:"ID"},S("username",{required:!0,minLength:{value:4,message:"\uc544\uc774\ub514 \ub610\ub294 \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694"}}))),r.createElement(u.A,x({type:"password",size:"md",isError:V.password,placeholder:"PW"},S("password",{required:!0,minLength:{value:4,message:"\uc544\uc774\ub514 \ub610\ub294 \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694"}}))),V.username&&!V.password&&r.createElement("span",null,null==(e=V.username)?void 0:e.message),V.password&&!V.username&&r.createElement("span",null,null==(t=V.password)?void 0:t.message)),r.createElement("span",{className:"flex justify-center"},r.createElement(i.A,{type:"submit"},"Login"))),r.createElement("span",{className:"flex justify-center text-xs text-tg-100"},"Copyright\xa9 Tmoney . All rights reserved."))),r.createElement(c.A,{isShow:I},r.createElement("div",null,r.createElement("h3",{className:"font-Tmoney text-headline1 leading-10 mb-[10px] text-center"},"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc548\ub0b4"),r.createElement("p",{className:"text-body1 leading-6 mb-[40px]"},"90\uc77c \uc774\uc0c1 \ub3d9\uc77c\ud55c \ube44\ubc00\ubc88\ud638\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4",r.createElement("br",null),"\uac1c\uc778\uc815\ubcf4 \ubcf4\ud638\ub97c \uc704\ud574 \ube44\ubc00\ubc88\ud638\ub97c \ubcc0\uacbd\ud574 \uc8fc\uc138\uc694"),r.createElement("div",{className:"flex gap-[30px] justify-center"},r.createElement(i.A,{type:"button",color:"secondary",size:"lg",onClick:()=>L()},"\ub2e4\uc74c\uc5d0 \ubcc0\uacbd"),r.createElement(i.A,{type:"button",size:"lg",onClick:()=>f("/password")},"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd")))))}}}]);
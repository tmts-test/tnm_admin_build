"use strict";(self.webpackChunktnm_front_admin=self.webpackChunktnm_front_admin||[]).push([[20],{20:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N});var n=r(525),a=r(6038),l=r(5788),o=r(8557),c=r(6071),s=r(4378),m=r(1274),u=r(966),i=r(7541),d=r(6869),p=Object.defineProperty,h=Object.defineProperties,b=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,g=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))E.call(t,r)&&g(e,r,t[r]);if(f)for(var r of f(t))x.call(t,r)&&g(e,r,t[r]);return e},S=(e,t)=>h(e,b(t)),v=(e,t,r)=>new Promise(((n,a)=>{var l=e=>{try{c(r.next(e))}catch(e){a(e)}},o=e=>{try{c(r.throw(e))}catch(e){a(e)}},c=e=>e.done?n(e.value):Promise.resolve(e.value).then(l,o);c((r=r.apply(e,t)).next())}));function N({}){var e;const[t,r]=(0,n.useState)([]),[p,h]=(0,n.useState)([]),[b,f]=(0,n.useState)(""),[E,x]=(0,n.useState)(""),g=(0,a.zy)(),N=g.pathname,w=(0,a.Zp)(),{auth:A}=(0,o.A)(),[j,k]=(0,n.useState)(),[O,C]=(0,n.useState)(!1),{data:P,refetch:D}=(0,i.Y7)(),{data:L,refetch:M}=(0,i.Rc)(Number(g.pathname.match(/\d+$/))),{mutate:$,isSuccess:z,isError:V}=(0,i.tV)();const{register:_,setValue:T,watch:F,formState:{isSubmitting:q,isValid:B},handleSubmit:I}=(0,l.mN)({mode:"onChange",shouldFocusError:!1,defaultValues:{athtDesc:""}}),R=F("athtDesc"),Y=new Set([1,10,14]);(0,n.useEffect)((()=>{M(),D()}),[N]),(0,n.useEffect)((()=>{var e;if(null==(e=null==L?void 0:L.result)?void 0:e.authority){const{athtNm:e,athtDesc:t}=L.result.authority;x(e),T("athtDesc",t),f(t),h(L.result.authorityMenuSnoList.filter((e=>!Y.has(e))))}}),[L]),(0,n.useEffect)((()=>{C(R!==b),t.length>0&&p.length>0&&(!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(p,t)?C(!0):C(!1))}),[R,t]),(0,n.useEffect)((()=>{z&&w("/manager/permission")}),[z]),(0,n.useEffect)((()=>{V&&(k(!j),toast.alert("\uad8c\ud55c\uc744 \uac00\uc9c4 \uad00\ub9ac\uc790\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4"))}),[V]);return n.createElement(n.Fragment,null,n.createElement("h2",{className:"mb-[16px] text-headline3 font-Tmoney"},"\uad00\ub9ac\uc790\uad00\ub9ac > \uad8c\ud55c \uad00\ub9ac > \uad8c\ud55c \uc218\uc815"),n.createElement("div",{className:"max-w-[952px]"},n.createElement("form",{onSubmit:I((e=>v(this,null,(function*(){try{if(!t.length)return void toast.alert("\ucd5c\uc18c 1\uac1c \uc774\uc0c1 \uad8c\ud55c\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694");e.athtSno=Number(g.pathname.match(/\d+$/)),e.authorityMenuSnoList=t,d.A.put(`/adm/authority/${g.pathname.match(/\d+$/)}`,e,{headers:{Authorization:`Bearer ${A.accessToken}`,Accept:"application/json"}}).then((e=>{200===e.status&&(w("/manager/permission"),toast.success("\uad8c\ud55c\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4"))})).catch((function(e){console.log(e)}))}catch(e){console.error("Submit Error:",e)}}))))},n.createElement("div",{className:"overflow-hidden mb-[16px] border border-tg-100 rounded-[10px]"},n.createElement("table",{className:"border-collapse border-hidden table-fixed"},n.createElement("colgroup",null,n.createElement("col",{width:"195"}),n.createElement("col",{width:"757"})),n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:"px-[24px] pt-[9px] pb-[7px] border-b border-r border-tg-100 bg-tg-10 text-20 font-bold text-left"},"\uad8c\ud55c\uba85*"),n.createElement("td",{className:"px-[12px] border-b border-tg-100"},E)),n.createElement("tr",null,n.createElement("th",{className:"px-[24px] pt-[9px] pb-[7px] border-b border-r border-tg-100 bg-tg-10 text-20 font-bold text-left"},"\uad8c\ud55c \uc124\uba85*"),n.createElement("td",{className:"px-[12px] border-b border-tg-100"},n.createElement("div",{className:"w-[285px]"},n.createElement(s.A,y({type:"text",size:"sm"},_("athtDesc",{required:!0})))))),n.createElement("tr",null,n.createElement("th",{className:"px-[24px] pt-[9px] pb-[7px] border-b border-r border-tg-100 bg-tg-10 text-20 font-bold text-left"},"\uad8c\ud55c \uad00\ub9ac*"),n.createElement("td",{className:"px-[12px] border-b border-tg-100"},(null==P?void 0:P.result.menuList)&&n.createElement(m.A,{data:function(e){const t=new Map,r=[];return e.forEach((e=>{const{menuSno:n,hgrnMenuSno:a,menuNm:l}=e,o={title:l,menuSno:n,childrens:[]};t.set(n,o),null===a&&r.push(o)})),e.forEach((e=>{const{menuSno:r,hgrnMenuSno:n}=e;if(null!==n){const e=t.get(n),a=t.get(r);e&&a&&e.childrens.push(a)}})),e.forEach((e=>{const{menuSno:r,menuNm:n}=e;if("\uc54c\ub9bc\uad00\ub9ac"===n){const e=t.get(r);if(e){const t=S(y({},e),{childrens:[]});e.childrens.push(t)}}})),r}(null==P?void 0:P.result.menuList),menuSnoList:null==(e=null==L?void 0:L.result)?void 0:e.authorityMenuSnoList,onChange:e=>r(e)})))))),n.createElement("div",{className:"flex justify-between"},n.createElement(c.A,{color:"secondary",onClick:()=>w("/manager/permission")},"\ubaa9\ub85d"),n.createElement("div",{className:"flex gap-[15px]"},n.createElement(c.A,{type:"button",color:"secondary",onClick:()=>k(!j)},"\uc0ad\uc81c"),O?n.createElement(c.A,{type:"submit"},"\uc800\uc7a5"):n.createElement(c.A,{type:"button",color:"secondary"},"\uc800\uc7a5"))))),n.createElement(u.A,{isShow:j},n.createElement("div",{className:"flex flex-col items-center"},n.createElement("h3",{className:"font-Tmoney text-headline1 leading-10 mb-[30px]"},"\uad8c\ud55c \uc0ad\uc81c \uc54c\ub9bc"),n.createElement("p",{className:"text-body1 leading-6 mb-[30px] text-center"},"\uad00\ub9ac\uc790 \uad8c\ud55c\uc740 \uc0ad\uc81c \ud6c4 \ubcf5\uad6c\uac00 \ubd88\uac00\ud569\ub2c8\ub2e4",n.createElement("br",null),"\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc5b4\uc694?"),n.createElement("div",{className:"flex justify-center gap-[15px]"},n.createElement(c.A,{size:"lg",color:"secondary",onClick:()=>k(!j)},"\ucde8\uc18c"),n.createElement(c.A,{size:"lg",onClick:()=>{$(Number(g.pathname.match(/\d+$/)))}},"\ud655\uc778")))))}}}]);
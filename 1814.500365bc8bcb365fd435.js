"use strict";(self.webpackChunktnm_front_admin=self.webpackChunktnm_front_admin||[]).push([[1814],{1814:(e,t,l)=>{l.r(t),l.d(t,{default:()=>C});var a=l(525),n=l(6038),r=l(6869),c=l(5788),s=l(2188),o=l(6071),i=l(4378),m=l(3904),p=l(7963),d=l(7806),u=l(3249),b=Object.defineProperty,f=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,g=(e,t,l)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,E=(e,t)=>{for(var l in t||(t={}))h.call(t,l)&&g(e,l,t[l]);if(f)for(var l of f(t))x.call(t,l)&&g(e,l,t[l]);return e},w=(e,t,l)=>new Promise(((a,n)=>{var r=e=>{try{s(l.next(e))}catch(e){n(e)}},c=e=>{try{s(l.throw(e))}catch(e){n(e)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,c);s((l=l.apply(e,t)).next())}));function C({}){const e=(0,n.Zp)(),t=(0,n.zy)(),l=t.pathname,[b,f]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),[g,C]=(0,a.useState)([]),[y,N]=(0,a.useState)(""),[S,v]=(0,a.useState)("Y"),[A,F]=(0,a.useState)(""),[T,k]=(0,a.useState)(!1),{data:D,refetch:O}=(0,p.D5)(Number(t.pathname.match(/\d+$/))),{register:j,setValue:P,watch:$,formState:{errors:_,isSubmitting:z,isValid:B},handleSubmit:L}=(0,c.mN)({mode:"onChange",defaultValues:{atchFileSnoList:null,newsClipTtlNm:"",newsClipCtt:""}}),V=$("newsClipTtlNm");(0,a.useEffect)((()=>{O()}),[l]),(0,a.useEffect)((()=>{"N"===S&&F(""),y&&V?"Y"===S||"R"===S?(k(!1),14!==A.length&&16!==A.length||k(!0)):k(!0):k(!1)}),[y,V,A,S]),(0,a.useEffect)((()=>{var e;if(null==(e=null==D?void 0:D.result)?void 0:e.newsClipping){const{newsClipTtlNm:e,newsClipCtt:t,files:l,bltnSttDtm:a,bltnStaCd:n}=D.result.newsClipping;P("newsClipTtlNm",e),P("newsClipCtt",t),v(n),F(a),N(t),x([]),x((e=>[...e,...l])),f([]),f((e=>[...e,...l]))}}),[D]);return a.createElement(a.Fragment,null,a.createElement("h2",{className:"mb-[16px] text-headline3 font-Tmoney"},"\ub274\uc2a4\ud074\ub9ac\ud551 > \uc218\uc815\ud558\uae30"),a.createElement("div",null,a.createElement("form",{className:"flex items-start gap-[40px]",onSubmit:L((l=>w(this,null,(function*(){l.newsClipSno=Number(t.pathname.match(/\d+$/)),l.newsClipCtt=y,l.bltnSttDtm=A,l.bltnStaCd=S,l.atchFileSnoList=h.map((e=>e.atchFileSno)),l.deleteAtchFileSnoList=g.map((e=>e.atchFileSno)),14===A.length&&(l.bltnSttDtm=(0,d.aN)(A)),r.A.put(`/adm/news-clipping/${t.pathname.match(/\d+$/)}`,l).then((t=>{200===t.status&&(e("/cscenter/news-clipping"),toast.success("\uac8c\uc2dc\ubb3c\uc774 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4"))})).catch((function(e){console.log(e)}))}))))},a.createElement("div",null,a.createElement("div",{className:"overflow-hidden mb-[16px] border border-tg-100 rounded-[10px]"},a.createElement("table",{className:"border-collapse border-hidden table-fixed"},a.createElement("colgroup",null,a.createElement("col",{width:"195"}),a.createElement("col",{width:"757"})),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",{className:"px-[24px] pt-[9px] pb-[7px] border-b border-r border-tg-100 bg-tg-10 text-20 font-bold text-left"},"\uc81c\ubaa9"),a.createElement("td",{className:"px-[12px] border-b border-tg-100"},a.createElement("div",{className:"w-[446px]"},a.createElement(i.A,E({type:"text",size:"sm",isError:_.newsClipTtlNm},j("newsClipTtlNm",{required:!0})))))),a.createElement("tr",null,a.createElement("th",{className:"px-[24px] pt-[9px] pb-[7px] border-b border-r border-tg-100 bg-tg-10 text-20 font-bold text-left"},"\ub0b4\uc6a9"),a.createElement("td",{className:"px-[12px] py-[12px] border-b border-tg-100"},a.createElement(s.A,{setData:e=>N(e),defaultData:y,isUploadImage:!0,onChange:e=>{x((t=>[...t,e]))}}))),a.createElement("tr",null,a.createElement("th",{className:"px-[24px] pt-[9px] pb-[7px] border-b border-r border-tg-100 bg-tg-10 text-20 font-bold text-left"},"\ucca8\ubd80\ud30c\uc77c"),a.createElement("td",{className:"px-[12px] border-b border-tg-100"},a.createElement("div",{className:"flex gap-[8px] w-[400px] pt-[10px] relative"},a.createElement("input",{key:h.length,type:"file",multiple:!0,className:"absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer",onChange:e=>w(this,null,(function*(){const t=e.target.files;if(t){const l=new FormData;for(let e=0;e<t.length;e++)l.append("attach",t[e]);r.A.post("/adm/news-clipping/file/upload",l,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{x((t=>e&&e.data&&e.data.result?[...t,...e.data.result.saveFileList]:void toast.alert("\ud30c\uc77c \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")))})).catch((function(e){console.log(e),toast.alert("\ud30c\uc77c \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})),e.target.value=""}}))}),a.createElement(i.A,{type:"text",size:"sm"}),a.createElement(o.A,{size:"md",color:"secondary"},"\ucc3e\uc544\ubcf4\uae30....")),h.length?a.createElement("div",{className:"py-[7px]"},null==h?void 0:h.map(((e,t)=>"ATTACH"===e.fileAcsTypCd&&a.createElement("div",{key:`file-${t}`,className:"flex items-center gap-[5px]"},a.createElement("span",{className:"text-caption"},e.orglFileNm),a.createElement("button",{type:"button",onClick:()=>(e=>{const t=h.filter((t=>!(t.atchFileSno===e.atchFileSno)));x(t);const l=b.filter((t=>t.atchFileSno===e.atchFileSno));C(g.concat(l))})(e)},a.createElement(m.A,{icon:"file_delete"})))))):a.createElement("div",{className:"flex items-center gap-[10px] py-[7px]"},a.createElement(m.A,{icon:"check"}),a.createElement("span",{className:"text-caption"},"\ud30c\uc77c\ucca8\ubd80\ub294 5MB, \ucd5c\ub300 10\uae4c\uc9c0 \uac00\ub2a5\ud569\ub2c8\ub2e4. \ud30c\uc77c 0\uac1c, 0KB/5MB"))))))),a.createElement("div",{className:"flex justify-between"},a.createElement(o.A,{color:"secondary",onClick:()=>e("/cscenter/news-clipping")},"\ucde8\uc18c"),T?a.createElement(o.A,{type:"submit"},"\uc800\uc7a5"):a.createElement(o.A,{type:"button",color:"secondary"},"\uc800\uc7a5"))),a.createElement(u.A,{bltnStaCd:S,bltnSttDtm:A,setBltnStaCd:v,onChange:e=>F(e)}))))}}}]);
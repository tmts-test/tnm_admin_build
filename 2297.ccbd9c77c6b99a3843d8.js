"use strict";(self.webpackChunktnm_front_admin=self.webpackChunktnm_front_admin||[]).push([[2297],{2297:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N});var n=r(1027),a=r(2132),o=r(5788),l=r(531),c=r(3269),s=r(9492),m=r(8896),i=r(4187),u=r(5619),d=Object.defineProperty,p=Object.defineProperties,b=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,E=(e,t,r)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))f.call(t,r)&&E(e,r,t[r]);if(h)for(var r of h(t))x.call(t,r)&&E(e,r,t[r]);return e},y=(e,t)=>p(e,b(t)),w=(e,t,r)=>new Promise(((n,a)=>{var o=e=>{try{c(r.next(e))}catch(e){a(e)}},l=e=>{try{c(r.throw(e))}catch(e){a(e)}},c=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,l);c((r=r.apply(e,t)).next())}));function N({}){const[e,t]=(0,n.useState)([]),[r,d]=(0,n.useState)(!1),p=(0,a.Zp)(),{auth:b}=(0,l.A)(),{data:h}=(0,i.Y7)(),{register:f,watch:x,formState:{errors:E,isSubmitting:N,isValid:v},handleSubmit:S}=(0,o.mN)({mode:"onChange",shouldFocusError:!1,defaultValues:{athtNm:"",athtDesc:""}}),A=x("athtNm");(0,n.useEffect)((()=>{d(!1)}),[A]);const O=e=>w(this,null,(function*(){try{const t=yield u.A.post("/adm/authority/duplicate-authority-name",e),r=t.data.code;if(200===t.status){if("200100"===r&&(toast.success("\uc0ac\uc6a9 \uac00\ub2a5\ud55c \uad8c\ud55c\uba85\uc785\ub2c8\ub2e4"),d(!0)),"200101"===r)throw toast.alert("\uc911\ubcf5\ub41c \uad8c\ud55c\uba85\uc785\ub2c8\ub2e4"),new Error("Duplicate ID");if("200200"===r)throw toast.alert("\uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \uad8c\ud55c\uba85\uc785\ub2c8\ub2e4"),new Error("Invalid ID")}}catch(e){throw console.error(e),e}}));return n.createElement(n.Fragment,null,n.createElement("h2",{className:"mb-[16px] text-headline3 font-Tmoney"},"\uad00\ub9ac\uc790\uad00\ub9ac > \uad8c\ud55c \uad00\ub9ac > \uad8c\ud55c \ub4f1\ub85d"),n.createElement("div",{className:"max-w-[952px]"},n.createElement("form",{onSubmit:S((t=>w(this,null,(function*(){try{if(!r)return void toast.alert("\uad8c\ud55c\uba85 \uc911\ubcf5\uccb4\ud06c\ub97c \uc644\ub8cc\ud574 \uc8fc\uc138\uc694");if(!e.length)return void toast.alert("\ucd5c\uc18c 1\uac1c \uc774\uc0c1 \uad8c\ud55c\uc744 \uc120\ud0dd\ud574 \uc8fc\uc138\uc694");t.authorityMenuSnoList=e,u.A.post("/adm/authority",t,{headers:{Authorization:`Bearer ${b.accessToken}`,Accept:"application/json"}}).then((e=>{200===e.status&&(p("/manager/permission"),toast.success("\uad8c\ud55c\uc774 \ub4f1\ub85d\ub418\uc5c8\uc2b5\ub2c8\ub2e4"))})).catch((function(e){console.log(e)}))}catch(e){console.error("Submit Error:",e)}}))))},n.createElement("div",{className:"overflow-hidden mb-[16px] border border-tg-100 rounded-[10px]"},n.createElement("table",{className:"border-collapse border-hidden table-fixed"},n.createElement("colgroup",null,n.createElement("col",{width:"195"}),n.createElement("col",{width:"757"})),n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:"px-[24px] pt-[9px] pb-[7px] border-b border-r border-tg-100 bg-tg-10 text-20 font-bold text-left"},"\uad8c\ud55c\uba85*"),n.createElement("td",{className:"px-[12px] border-b border-tg-100"},n.createElement("div",{className:"flex items-center gap-[10px]"},n.createElement("div",{className:"w-[285px]"},n.createElement(s.A,g({type:"text",size:"sm",isError:E.athtNm},f("athtNm",{required:!0})))),n.createElement(c.A,{size:"md",type:"button",onClick:()=>{""!==A&&(O({athtSno:0,athtNm:A}),d(!0))}},"\uc911\ubcf5\ud655\uc778")))),n.createElement("tr",null,n.createElement("th",{className:"px-[24px] pt-[9px] pb-[7px] border-b border-r border-tg-100 bg-tg-10 text-20 font-bold text-left"},"\uad8c\ud55c \uc124\uba85*"),n.createElement("td",{className:"px-[12px] border-b border-tg-100"},n.createElement("div",{className:"w-[285px]"},n.createElement(s.A,g({type:"text",size:"sm"},f("athtDesc",{required:!0})))))),n.createElement("tr",null,n.createElement("th",{className:"px-[24px] pt-[9px] pb-[7px] border-b border-r border-tg-100 bg-tg-10 text-20 font-bold text-left"},"\uad8c\ud55c \uad00\ub9ac*"),n.createElement("td",{className:"px-[12px] border-b border-tg-100"},(null==h?void 0:h.result.menuList)&&n.createElement(m.A,{data:function(e){const t=new Map,r=[];return e.forEach((e=>{const{menuSno:n,hgrnMenuSno:a,menuNm:o}=e,l={title:o,menuSno:n,childrens:[]};t.set(n,l),null===a&&r.push(l)})),e.forEach((e=>{const{menuSno:r,hgrnMenuSno:n}=e;if(null!==n){const e=t.get(n),a=t.get(r);e&&a&&e.childrens.push(a)}})),e.forEach((e=>{const{menuSno:r}=e;if(13===r){const e=t.get(r);if(e){const t=y(g({},e),{childrens:[]});e.childrens.push(t)}}})),r}(null==h?void 0:h.result.menuList),onChange:e=>t(e)})))))),n.createElement("div",{className:"flex justify-between"},n.createElement(c.A,{color:"secondary",onClick:()=>p("/manager/permission")},"\ubaa9\ub85d"),N||v?n.createElement(c.A,{type:"submit"},"\uc800\uc7a5"):n.createElement(c.A,{type:"button",color:"secondary"},"\uc800\uc7a5")))))}}}]);